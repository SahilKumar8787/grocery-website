<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manage Users - Admin Panel</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
    .users-section {
      max-width: 900px;
      margin: 40px auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(76,175,80,0.10);
      padding: 32px 28px;
    }
    .users-section h1 {
      color: #4caf50;
      margin-bottom: 18px;
      text-align: center;
    }
    .users-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 24px;
      overflow-x: auto;
    }
    .users-table th, .users-table td {
      padding: 12px 8px;
      text-align: left;
      border-bottom: 1px solid #f6f8f7;
    }
    .users-table th {
      background: #f6f8f7;
      color: #4caf50;
      font-weight: 600;
    }
    .user-role {
      font-weight: bold;
      color: #fff;
      padding: 4px 10px;
      border-radius: 6px;
      background: #ff9800;
      display: inline-block;
    }
    .user-role.admin {
      background: #4caf50;
    }
    .user-action a {
      color: #4caf50;
      text-decoration: none;
      margin-right: 10px;
      font-weight: 500;
      transition: color 0.2s;
      cursor: pointer;
    }
    .user-action a:hover {
      color: #ff9800;
      text-decoration: underline;
    }
    .user-action a.delete {
      color: #e53935;
    }
    .user-action a.delete:hover {
      color: #c62828;
    }
    @media (max-width: 700px) {
      .users-section {
        padding: 18px 8px;
        border-radius: 10px;
      }
      .users-table th, .users-table td {
        padding: 8px 4px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav>
    <div class="logo">Admin Panel</div>
    <div>
      <a href="admin-dashboard.html">Dashboard</a>
      <a href="admin-products.html">Products</a>
      <a href="admin-orders.html">Orders</a>
      <a href="admin-users.html">Users</a>
      <a href="#" onclick="adminLogout()">Logout</a>
    </div>
  </nav>

  <!-- Users Section -->
  <section class="users-section">
    <h1><i class="fas fa-users"></i> Manage Users</h1>
    <table class="users-table">
      <thead>
        <tr>
          <th>User ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Username</th>
          <th>Role</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="users-tbody">
        <!-- Users will be rendered by JS -->
      </tbody>
    </table>
  </section>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Fresh Mart Admin Panel</p>
  </footer>

  <script src="js/script.js"></script>
  <script>
    // Display all users on page load
    document.addEventListener('DOMContentLoaded', function() {
      isAdminLoggedIn();
      displayAllUsers();
    });

    // Display all users in table
    function displayAllUsers() {
      const tbody = document.getElementById('users-tbody');
      if (!tbody) return;

      let users = JSON.parse(localStorage.getItem('users')) || [];
      
      if (users.length === 0) {
        tbody.innerHTML = '<tr><td colspan="6" style="text-align:center;padding:20px;color:#888;">No users found</td></tr>';
        return;
      }

      tbody.innerHTML = users.map((user, index) => `
        <tr>
          <td>${user.id}</td>
          <td>${user.name}</td>
          <td>${user.email}</td>
          <td>${user.username}</td>
          <td><span class="user-role">Customer</span></td>
          <td class="user-action">
            <a href="#" onclick="viewUserDetail(${index}); return false;"><i class="fas fa-eye"></i> View</a>
            <a href="#" class="delete" onclick="deleteUserAdmin(${index}); return false;"><i class="fas fa-trash"></i> Delete</a>
          </td>
        </tr>
      `).join('');
    }

    // View user details
    function viewUserDetail(index) {
      let users = JSON.parse(localStorage.getItem('users')) || [];
      const user = users[index];
      if (!user) {
        alert('User not found');
        return;
      }
      alert(`
User ID: ${user.id}
Name: ${user.name}
Email: ${user.email}
Username: ${user.username}
Joined: ${new Date().toLocaleDateString()}
      `.trim());
    }

    // Delete user
    function deleteUserAdmin(index) {
      if (!confirm('Are you sure you want to delete this user?')) return;

      let users = JSON.parse(localStorage.getItem('users')) || [];
      const deletedUser = users[index];
      users.splice(index, 1);
      localStorage.setItem('users', JSON.stringify(users));
      
      alert(`User "${deletedUser.name}" deleted successfully`);
      displayAllUsers();
    }
  </script>
</body>
</html>
